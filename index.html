<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Pranty ❤️</title>

<style>
body{
margin:0;
background:black;
overflow:hidden;
font-family:sans-serif;
color:white;
display:flex;
align-items:center;
justify-content:center;
height:100vh;
}

/* Card */
.card{
position:absolute;
z-index:5;
background:rgba(255,255,255,0.08);
padding:40px;
border-radius:30px;
backdrop-filter:blur(20px);
text-align:center;
}

canvas{
position:fixed;
top:0;
left:0;
}

/* bottom romantic layer */
#fx{ z-index:1; }

/* top mega layer */
#fxTop{
z-index:10;
pointer-events:none;
}
</style>
</head>
<body>

<div class="card">
<h1>I Love You ❤️</h1>
<p>Long press for mega explosion ✨</p>
</div>

<canvas id="fx"></canvas>
<canvas id="fxTop"></canvas>

<script>
/* ================= CANVAS SETUP ================= */

const canvas = document.getElementById("fx");
const ctx = canvas.getContext("2d");

const canvasTop = document.getElementById("fxTop");
const ctxTop = canvasTop.getContext("2d");

function resize(){
canvas.width = innerWidth;
canvas.height = innerHeight;
canvasTop.width = innerWidth;
canvasTop.height = innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ================= AUDIO ================= */

const boomSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-firework-explosion-1689.mp3");
boomSound.volume = 0.5;

/* ================= PARTICLES ================= */

class Particle{
constructor(x,y){
this.x=x;
this.y=y;
this.angle=Math.random()*Math.PI*2;
this.speed=Math.random()*5+2;
this.life=100;
this.trail=[];
}
update(){
this.trail.push({x:this.x,y:this.y});
if(this.trail.length>6) this.trail.shift();
this.x+=Math.cos(this.angle)*this.speed;
this.y+=Math.sin(this.angle)*this.speed;
this.speed*=0.96;
this.life--;
}
draw(){
for(let t of this.trail){
ctx.fillStyle="rgba(255,150,200,0.2)";
ctx.fillRect(t.x,t.y,2,2);
}
ctx.fillStyle=`rgba(255,150,200,${this.life/100})`;
ctx.beginPath();
ctx.arc(this.x,this.y,3,0,Math.PI*2);
ctx.fill();
}
}

class FastParticle{
constructor(x,y){
this.x=x;
this.y=y;
this.angle=Math.random()*Math.PI*2;
this.speed=Math.random()*15+8;
this.life=80;
}
update(){
this.x+=Math.cos(this.angle)*this.speed;
this.y+=Math.sin(this.angle)*this.speed;
this.speed*=0.98;
this.life--;
}
draw(){
ctxTop.fillStyle=`rgba(255,220,0,${this.life/80})`;
ctxTop.beginPath();
ctxTop.arc(this.x,this.y,3,0,Math.PI*2);
ctxTop.fill();
}
}

class Shockwave{
constructor(x,y){
this.x=x;
this.y=y;
this.radius=10;
this.life=30;
}
update(){
this.radius+=15;
this.life--;
}
draw(){
ctxTop.strokeStyle=`rgba(255,255,255,${this.life/30})`;
ctxTop.lineWidth=4;
ctxTop.beginPath();
ctxTop.arc(this.x,this.y,this.radius,0,Math.PI*2);
ctxTop.stroke();
}
}

class GoldRain{
constructor(){
this.x=Math.random()*canvasTop.width;
this.y=-20;
this.speed=Math.random()*4+3;
this.life=200;
}
update(){
this.y+=this.speed;
this.life--;
}
draw(){
ctxTop.fillStyle="gold";
ctxTop.fillRect(this.x,this.y,2,8);
}
}

/* ================= ARRAYS ================= */

let particles=[];
let fastParticles=[];
let shockwaves=[];
let goldRain=[];

/* ================= FUNCTIONS ================= */

function boom(x,y){
for(let i=0;i<120;i++){
particles.push(new Particle(x,y));
}
}

function megaBoom(x,y){

for(let i=0;i<350;i++){
fastParticles.push(new FastParticle(x,y));
}

shockwaves.push(new Shockwave(x,y));

for(let i=0;i<80;i++){
goldRain.push(new GoldRain());
}

if(navigator.vibrate){
navigator.vibrate([120,60,200]);
}

boomSound.currentTime=0;
boomSound.play();

flash();
}

function flash(){
const f=document.createElement("div");
f.style.position="fixed";
f.style.inset="0";
f.style.background="white";
f.style.opacity="0.7";
f.style.zIndex="20";
document.body.appendChild(f);
setTimeout(()=>f.remove(),100);
}

/* continuous background explosion */
setInterval(()=>{
boom(
Math.random()*canvas.width,
Math.random()*canvas.height*0.6
);
},1800);

/* ================= ANIMATION ================= */

function animate(){

ctx.fillStyle="rgba(0,0,0,0.2)";
ctx.fillRect(0,0,canvas.width,canvas.height);

ctxTop.clearRect(0,0,canvasTop.width,canvasTop.height);

for(let i=particles.length-1;i>=0;i--){
particles[i].update();
particles[i].draw();
if(particles[i].life<=0) particles.splice(i,1);
}

for(let i=fastParticles.length-1;i>=0;i--){
fastParticles[i].update();
fastParticles[i].draw();
if(fastParticles[i].life<=0) fastParticles.splice(i,1);
}

for(let i=shockwaves.length-1;i>=0;i--){
shockwaves[i].update();
shockwaves[i].draw();
if(shockwaves[i].life<=0) shockwaves.splice(i,1);
}

for(let i=goldRain.length-1;i>=0;i--){
goldRain[i].update();
goldRain[i].draw();
if(goldRain[i].life<=0) goldRain.splice(i,1);
}

requestAnimationFrame(animate);
}
animate();

/* ================= LONG PRESS ================= */

let pressTimer;
let longPress=false;

function startPress(e){
longPress=false;
pressTimer=setTimeout(()=>{
longPress=true;
let x=e.clientX || e.touches[0].clientX;
let y=e.clientY || e.touches[0].clientY;
megaBoom(x,y);
},600);
}

function endPress(e){
clearTimeout(pressTimer);
if(!longPress){
let x=e.clientX || (e.changedTouches && e.changedTouches[0].clientX);
let y=e.clientY || (e.changedTouches && e.changedTouches[0].clientY);
if(x && y) boom(x,y);
}
}

window.addEventListener("mousedown",startPress);
window.addEventListener("mouseup",endPress);
window.addEventListener("touchstart",startPress);
window.addEventListener("touchend",endPress);

</script>

</body>
</html>
